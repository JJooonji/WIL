# 2022.07.17의 WIL

## 인증과 인가
- 인증(Authentication)<br>-> 로그인(특정 서비스에 권한이 주어진 사용자임을 아이디와 패스워드를 통해 인증)<br>
- 인가(Authorization)<br>-> 인증을 받은 사용자가 이후 서비스의 여러 기능들을 사용할 때, 로그인 후 내 계정으로만 할수있는 활동을 할 때 로그인되어있음을 알아보고 허가를 내어줌.

<br>

## 세션
---
* 세션 아이디를 사용해서 어떤 사용자가 서버에 로그인이 되어있음이 지속되는 상태를 세션이라고 함.
- 어떤 사용자들이 현재 로그인해있는지를 갖다가 서버가 반쪽 표딱지에 저장
- 사용자가 로그인에 성공하면 서버는 '세션 표딱지'를 생성<br>그리고 이걸 쭉 찢어서 반쪽은 사용자의 브라우저로, 반쪽은 메모리에 저장<br>(경우에 따라 하드디스크나, 데이터베이스에 저장하기도 함)<br>
- 문제점
  + 사용자가 동시에 많이 접속하면 반쪽 표딱지를 저장해놓은 서버의 메모리가 부족해질 수 있음.
  - 메모리는 서버의 문제가 있어서 꺼져버리면 다 날라가버릴수있음.(휘발성)
  - 서버가 여러개가 있다면 연결 사용에 문제가 발생할 수 있음.

<br>

## JWT
---
- 사용자가 로그인을 하면 토큰이란 표를 출력해서 바로 건네줌. 서버가 기억하고 있지 않음.
> 장점
- 인코딩 또는 암호화된 3가지 데이터를 이어붙인 것(마침표가 중간에 2번 들어감)
(header, payload, verify signature로 구분)<br>-> 헤더, 페이로드, 서명으로 나눠져 생성하므로 데이터의 위변조를 막을 수 있다.
- 인증정보에 대한 별도의 저장소가 필요없음
 
>문제점
- 토큰의 길이가 길어 인증 요청이 많아질수록 네트워크 부하 심해짐.
- 토큰을 탈취당하면 대처하기가 어려움
  -  해결방안 : 토큰의 만료시간을 가깝게 잡아서 토큰의 수명을 아주 짧게 주는 것<br>-> 로그인을 하면 토큰을 2개를 부여함.(수명이 짦은 access 토큰이랑 수명이 보통 2주 정도로 길게 잡혀있는 refresh 토큰)<br>-> 하지만 짧게나마 access토큰이 살아있는 동안은 이것을 차단할 방법이 없음. <br>=> `JWT의 한계`
- 구현하기 편리하고 좋더라고 내 서비스에 적용하기 적합한지 충분히 고려해야 함. 문제가 크게 되지 않는 적용 방식에서는 편리하고 경제적인 인가 방식이 됨.

<br>

## API
---
> API란?
- Application Programming Interface의 줄임말
- 프로그램이 선택할 수 있는 명령 목록을 정리하고, 명령을 받으면 응용 프로그램과 상호작용하여 요청된 명령에 대한 값을 전달하는 매개체라고 볼 수 있다.
> API의 역할
- 서버와 데이터베이스에 대한 출입구 역할
<br>-> 정보들이 저장되어있는 데이터베이스에 허용된 사람만 접근 가능하도록 접근성을 부여해줌
- 애플리케이션과 기기가 원활하게 통신할 수 있도록 함
<br>-> 스마트폰 어플이나 프로그램과 기기가 데이터를 원활히 주고받을 수 있도록 돕는 역할을 함.(시간과 비용을 절약할 수 있음)
- 모든 접속을 표준화함
<br>-> 모든 접속을 표준화하기 때문에 기계/운영체제 등과 상관없이 누구나 동일한 엑세스를 얻을 수 있음.
> API유형
1. private API
- 내부 API로, 회사 개발자가 자체 제품과 서비스를 개선하기 위해 내부적으로 발행, 제3자에게 노출되지 않음
2. public API
- 개방형 API로, 모두에게 공개/누구나 제한없이 API를 사용할 수 있음.
3. partner API
- 기업이 데이터 공유에 동의하는 특정인들만 사용할 수 있음. 비지니스 관계에서 사용되는 편이며, 종종 파트너 회사 간에 소프트웨어를 통합하기 위해 사용됨.
> 장점
- 새로운 툴과 제품을 설계하거나 기존 툴과 제품을 관리할 때 API를 사용하면 유연성을 높이고 설계, 관리, 사용 방법을 간소화 할 수 있음.
- 프로그램 사용 시 정보를 전달하는 기능이 있어 사용자의 환경에 맞춰서 전달할 수 있음. API에 직접 엑세스 하지 않아도 콘텐츠가 자동적으로 생성 및 업로드가 되어 확장이 용이함.
---
> 이번주를 정리해보자.
### API...
#### - 항해99 1주 미니프로젝트를 하면서 우리 팀을 고통받게 했던 API.. 좋은 기능이지만 좋게 쓰려면 진입장벽이 너무 높았다. 
#### 공공 API를 사용하기 위해 활용신청을 하여 인증키를 받았지만, 활용하는데에 어려움이 있었다. 
#### 인코딩 인증키로 정보가 보이지 않아 디코딩 인증키를 입력하여봤지만, 그래도 오픈api를 볼 수 없었다ㅠㅠ 
#### 이 문제로 미니프로젝트 4일 중 1일차와 2일차 오전까지 팀원들과 고민을 했다.. 다같이 구글에 이런저런한 방법을 검색해보며 계속 시도를 해봤지만, api가 팀원 그 누구에게도 보이지않아 결국 인터파크 티켓 축제/행사 페이지에서 정보를 get해와서 프로젝트를 진행하기로 했다!!
#### 그렇게 미니프로젝트가 끝나고 혹시나해서 기존에 활용하려했던 api에 접근해보신 1주차 팀장님이 정보가 나오는 것을 확인해주셨다..
#### 그렇게 우리 팀원들은 새로운 것을 깨닫고 배울 수 있었다.
`공공 API는 일주일 전에 인증을 받자..`